<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    
    <script>
        /* 怎麼做 TODOlist 先把版面切出來 在原來的版面試著實驗功能 如果功能可以運行了 就將原來的資料刪除 直接利用功能產生資料 */
        $(document).ready(function() {
            $('.add-todo').keydown(function(e) { //監聽 // 什麼時候要用 e 什麼時候不用 e
                // 如果事件發生
                if (e.key === 'Enter') { // 這裡可不可以使用 keycode？
                    // 執行動作
                    addTodo(e.target.value) // addTodo is a functions
                }
            })
            $('.todo-list').click(function (e) {/* 總結測試的過程 先用 console.log (訊號) 代替動作 缺點可以產生訊號才切換動作 */
                const element = $(e.target)
                if ($(e.target).hasClass('todo__delete')) {
                    element.parent().parent().remove() // 找自己的 paren 刪除
                } else if (element.hasClass('todo__done')) {
                    
                    // 標記未完成
                   if (element.hasClass('todo__undone')) {
                        element.parent().parent().removeClass('list-group-item-success')
                        /* 邏輯要想通 */
                        element.removeClass('todo__undone')
                        element.removeClass('btn-primary') 
                        element.addClass('btn-success') 
                        element.text('完成')
                   } else { // 標記完成
                        element.parent().parent().addClass('list-group-item-success')
                        element.addClass('todo__undone') 
                        element.removeClass('btn-success') 
                        element.addClass('btn-primary') 
                        element.text('未完成')
                   }
                }
            })
        })
        
        function addTodo(value) {
            const newTodo = getTodoHTML(value);
            $('.add-todo').val('') // keyword: jquery empty input
            $('.todo-list').append(newTodo)
        }
        // 將 addTodo 與 getTodoHTML 結構分開較好維護
        function getTodoHTML(value) { 
            return `
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    ${value}
                    <div>
                        <div class="btn btn-success todo__done">完成</div>
                        <div class="btn btn-danger todo__delete">刪除</div>
                    </div>
                </li>` // 為什麼這邊要用 ` ${}是 jQuery 的獨有用法嗎？
        }
    </script>
    <style>
        .container {
            margin-top: 20px;
        }
    </style>
    <title>Todolist</title>
</head>
<body><!-- list group 和 list group 的差別? -->
    <div class="container">
        <div class="row">

            <div class="col-md-5">

                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">Add new todo</span>
                    </div>
                    <input type="text" required="required" class="form-control add-todo" placeholder="todo" aria-label="todo" aria-describedby="basic-addon1"><!-- aria 無障礙設計 --> <!-- 為什麼 requried 沒有用？ -->
                </div>
                          
                <ul class="list-group todo-list"></ul>

            </div>

        </div>
    </div>
</body>
</html>

<!-- 想做的功能 checked 自動往後排 -->
<!-- 不同欄位功能 -->
<!-- 我的 Todolist 主題是什麼？ -->
<!-- 複習清單？ -->
<!-- 屯課清單？ -->